---
title: "Google Cloud Kill Switch Gen 2"
publishedAt: "2024-12-03"
summary: "Simple cloud run function gen 2 triggered by a PubSub Message that will disable billing for a project."
stack: "Node, TypeScript, Google Cloud"
---

A simple Cloud Run Gen 2 function, triggered by a Pub/Sub message, disables billing for a project. This is helpful for tight budgets to prevent exceeding them. Note that budget alerts are not immediate, so there may be a delay between billing and alert delivery.

[GitHub Repository](https://github.com/galletafromjell666/gcp_kill_switch_function_gen_2)

## Set up

- Git, node and npm installed. (Already available on cloud shell terminal)
- Cloud Billing API enabled. [API](https://console.cloud.google.com/marketplace/product/google/cloudbilling.googleapis.com)
- A Budget alert connected to a Pub/Sub topic. [DOCS](https://cloud.google.com/billing/docs/how-to/budgets-programmatic-notifications#connect-budget)
- default service account for Compute Engine with role Billing Account Administrator.
  - Or create your own service account for the function.
